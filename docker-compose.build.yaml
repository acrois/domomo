services:
  postgres:
    build:
      context: ./
      dockerfile: postgres.Dockerfile
      args:
        DATABASE_TAG: ${DATABASE_TAG:-16.2-alpine3.19}
    pull_policy: build
    restart: unless-stopped
    volumes:
      - ./initdb.d:/docker-entrypoint-initdb.d
  domomo:
    build:
      context: ./
    pull_policy: build
    restart: unless-stopped
    command: [ "bun", "watch" ]
    volumes:
      - ./src:/app/src
      - ./test:/app/test
      - ./sample:/app/sample
